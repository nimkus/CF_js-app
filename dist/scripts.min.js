"use strict";let pokemonRepository=function(){let e=[];function t(e,t){t.push(e)}function n(){let e=document.getElementById("message-loading");e&&e.remove()}function o(e){let t=document.createElement("div");t.classList.add("error-message"),t.innerText=e,document.body.appendChild(t)}function i(e){return fetch(e.detailsUrl).then(function(e){if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(function(n){let o=n.types,i=[];o.forEach(function(e){t(e.type.name,i)}),e.types=i.join(", "),e.imageUrl=n.sprites.other.dream_world.front_default,e.height=n.height}).catch(function(e){o("Failed to load Pok\xe9mon details. Please try again later."),console.error(e)})}function a(){return e}function l(e){let t=document.querySelector(".poke-container"),n=document.createElement("ul");n.classList.add("list-group","pokemon-list"),t.appendChild(n);let o=document.createElement("li");o.classList.add("pokemon-list-item"),n.appendChild(o);let a=document.createElement("button");a.classList.add("btn","btn-outline-light","btn-custom"),a.setAttribute("data-toggle","modal"),a.setAttribute("data-target","#poke-modal"),a.innerText=e.name,o.appendChild(a);let l=document.createElement("img");l.setAttribute("data-src",""),l.setAttribute("alt","Preview image of Pokemon"),l.classList.add("img-fluid","pok-img-custom"),a.appendChild(l);new IntersectionObserver((t,n)=>{t.forEach(t=>{if(t.isIntersecting){let o=t.target;i(e).then(()=>{o.src=e.imageUrl,n.unobserve(o)})}})}).observe(l),a.addEventListener("click",function(){Array.from(document.getElementsByClassName("selected-pokemon")).forEach(function(e){e.classList.remove("selected-pokemon")}),a.classList.add("selected-pokemon"),s(e)})}function s(e){i(e).then(function(){let t=document.querySelector(".modal-title"),n=document.querySelector(".modal-body");t.innerHTML="",n.innerHTML="";let o=document.createElement("h1");o.classList.add("poke-headline"),o.innerText=e.name,t.appendChild(o);let i=document.createElement("div");i.classList.add("pok-text-container");let a=document.createElement("p"),l=document.createElement("p");a.classList.add("modal-p"),l.classList.add("modal-p"),a.innerText="Height: "+e.height,l.innerText="Types: "+e.types,n.appendChild(i),i.appendChild(a),i.appendChild(l);let s=document.createElement("img");s.classList.add("modal-img"),s.src=e.imageUrl,n.appendChild(s)})}let r=document.getElementById("scroll-to-top");r&&r.addEventListener("click",function(){document.body.scrollTop=0,document.documentElement.scrollTop=0});let d;return(d=$("#search-bar")).on("input",function(){let t=d.val().toLowerCase(),n=e.filter(e=>e.name.toLowerCase().startsWith(t)),o=$(".poke-container");o.empty(),0===n.length?o.text("No Pokemon with this name exists"):n.forEach(e=>{l(e)})}),{getAll:a,addListItem:t,createPok:l,loadList:function i(){let a,l;return a=document.querySelector(".poke-container"),(l=document.createElement("p")).setAttribute("id","message-loading"),l.classList.add("message-loading"),l.innerText="Loading pokemon...",a.appendChild(l),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){if(n(),!e.ok)throw Error("Network response was not ok");return e.json()}).then(function(n){n.results.forEach(function(n){t({name:n.name,detailsUrl:n.url},e)})}).catch(function(e){n(),o("Failed to load the Pok\xe9mon list. Please try again later."),console.error(e)})},loadDetails:i,showDetails:s}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.createPok(e)})});